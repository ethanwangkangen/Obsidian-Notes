# DNS
- See [[2. Application - DNS]]


# Enumeration
1. Vhost/Subdomain enumeration
	- Subdomain enumeration:
		- `dnsenum --enum inlanefreight.com -f /usr/share/seclists/Discovery/DNS/subdomains-top1million-20000.txt -r`
	- VHost enumeration:
		- `gobuster vhost -u http://<target_IP_address> -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt --append-domain
		- For all of the found vhosts, put them in /etc/hosts, and do **recurrent** enumeration
2. Directory brute-forcing
	- `gobuster dir -u https://sub.example.com -w /usr/share/seclists/Discovery/Web-Content/common.txt

## Subdomain 
- Enumeration
	- Active
		- Attempting DNS zone transfer
		- Brute force enumeration
			- Dnsenum
			- Ffuf
			- Gobuster
	- Passive
		- Certificate Transparency (CT) logs 
			- Public repositories of SSL/TLS certificates
		- Googling
			- Specialised search operations (eg, site:)

## Tools
dnsenum
- dns record enumeration
- zone transfer attempts
- subdomain brute forcing
- google scraping
- reverse lookup
- whois lookups
- `dnsenum --enum inlanefreight.com -f /usr/share/seclists/Discovery/DNS/subdomains-top1million-20000.txt -r`
	- -r: recursive brute forcing

## Zone transfer
- Copy of all DNS records within a zone from one name server to another
- `dig axfr @nsztm1.digi.ninja zonetransfer.me
	- Request a one transfer from nsztm1.di.ninja for tthe zonetransfer.me domain

# Virtual Hosts
- Configurations within a web server that allow multiple websites or applications to be hosted on single server
- React to 'host' section in HTTP request
- Important: If virtual host does not have a DNS record, can just access it via modifying /etc/hosts, mapping that domain name to an IP

Discovery
- Manual analysis of HTTP headers
- Reverse DNS lookups
- Tools
	- gobuster
	- Feroxbuster
	- ffuf

Go buster
- 1. Need to identify target IP, can be done thorugh DNS lookup or otherwise
- 2. Wordlist preparation
- `gobuster vhost -u http://<target_IP_address> -w <wordlist_file> --append-domain
	- eg.
	- gobuster vhost -u http://inlanefreight.htb:81 -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-110000.txt --append-domain

# Certificate Transparency Logs
- Public, append-only ledgers that record issuance of SSL/TLS certificates
- Global registry of certifcates
- Provide definitive record of certificates issued for a domain and its subdomain

Searching CT logs
- crt.sh
	- `curl -s "https://crt.sh/?q=facebook.com&output=json" | jq -r '.[] | select(.name_value | contains("dev")) | .name_value' | sort -u
		- fetches JSON output from crt.sh for erts matching domain facebook.com
		- jq .. -> filters for entries where name_value field (contianing domain/subdomain) includes the string 'dev'
		- sort -u: sorts alphabetically and removes duplicates

- Censys