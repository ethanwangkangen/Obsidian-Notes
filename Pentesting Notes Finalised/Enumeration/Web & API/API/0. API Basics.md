# Web API
- Client sends a reqest, often JSON, API returns structured data, usually JSON.

## Key pieces
- Endpoint/URL
	- Where to send the request, eg. `http://api.example.com/users/123`
- Method/Verb
	- What you want to do, eg.
		- GET (read), POST (create), PUT/PATCH (update), DELETE (delete)
- Headers
	- Extra metadata
- Response
	- Status code (200/404/500), headers, body (data or error)
- JSON
	- Most common format for data interchange `{"id":123, "name":"alice"}`

## Authentication vs authorisation
- Authentication: Prove who you are
- Authorisation: What can you do

# Inspecting API

## With curl
- `curl -i https://jsonplaceholder.typicode.com/users/1`
	- Like banner grabbing

## With Python
```python
import requests
r = requests.get("https://jsonplaceholder.typicode.com/users/1", timeout=5)
print(r.status_code, r.headers.get("Content-Type"))
print(r.json())
```

# Running API with Python
```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class User(BaseModel):
    id: int
    username: str
    email: str

DB = {1: {"id":1,"username":"alice","email":"alice@example.com"}}

@app.get("/users/{user_id}", response_model=User)
def get_user(user_id: int):
    return DB[user_id]
```

Run server:
```python
uvicorn mini_api:app --reload --port 8000
```

Call the API from another terminal/machine
```python
curl http://127.0.0.1:8000/users/1
```
