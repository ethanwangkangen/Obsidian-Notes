# Pivoting
- Use a **pivot host** to access a target that is not directly reachable

# Tunneling
- Subset of pivoting
- Encapsulates network traffic into another protocol and routes traffic through it

# Networking Recap + Notes
- NIC
	- `ifconfig` or `ip addr` to see network interfaces
	- Each is associated with a Network Interface Controller (IP), and has an IP address
- Private vs public IPs
	- Private ranges:  (10.x, 192.168.x, 172.16â€“31.x)
	- Generally, the IPs we see after running `ifconfig` are the private IP addresses
	- Packets sent from outside the network will send to the router (single, publicly facing IP), and using the specific port, this will be translated to the correct private IP + port for the hosts in the network
	- Some interfaces may have publicly routable IP addresses, especially on devices that are directly facing the internet (not through a router etc.)
- Subnetting
	- eg. 192.168.1.23/24, where the netmask is 255.255.255.0
	- This means the network is 192.168.1.0, and host is 23
	- When machine wants to send traffic,
		- Apply netmask to own IP
		- Apply netmask to destingation IP
		- Compare
		- If match, send directly using ARP (since on same network), if not send to default gateway (192.168.1.1, or whatever shows up in `ip route`), ie. the router's IP
- Routing
	- To see routing table, `netstat -r`
		- For each packet, check "destination" and "genmask" column to see where it falls under. 
		- If none, then destination is "default"
		- "Gateway" is the next-hop address it is sent to
			- `_gateway` should be the router
- VPNs
	- When you see a new NIC when using a VPN, that actually is just how packets are sent to the VPN client (which then encrypts the packets and forwards to the VPN server)
	- `sudo openvpn <vpn file name> 
	- A new interface is found
		- `ifconfig`
			- tun0, inet `10.10.14.156
			- `10.10.14.156` is the **tun0 ip**
		- `ip route`
			- 10.10.10.0/23 via 10.10.14.1 dev tun0 
				- `10.10.14.1` is the gateway, **ie VPN server IP**
				- To reach the 10.10.0/23 subnet, send packets via gatewway 10.10.14.1 over tun0
			- 10.10.14.0/23 dev tun0 proto kernel scope link src 10.10.14.156 
				- VPN tunnel network itself
				- This is the direct connection to the VPN server (notice no 'via')
		- `netstat -r`
			- `10.10.14.0/23 dev tun0 proto kernel scope link src 10.10.14.156 `
				- 10.10.14.0/23 destination, gateway is 10.10.14.1 

```
Your PC
  |
  | tun0 (10.10.14.156)
  |
VPN server (10.10.14.1)
  |
  +--> 10.10.10.0/23 (HTB machines)
  +--> 10.129.0.0/16 (HTB infra)
```

