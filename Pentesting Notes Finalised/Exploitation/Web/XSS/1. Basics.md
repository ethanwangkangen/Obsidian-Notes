# Stored
- Stored in comments, etc.

- Payloads
	- `<script>alert(window.origin)</script>
	- Can confirm with looking at page source, can see payload in page source
```
<div></div><ul class="list-unstyled" id="todo"><ul><script>alert(window.origin)</script>
</ul></ul>
```

- Modern browsers may block the alert() js function
- Other payloads
	- `<plaintext>`
	- `<script>print()</script>`
- To check if stored, refresh and see if get alert again


# Reflected
- Input reaches back end server and gets returned without being filtered or sanitised
- eg. `GET /search?q=<script>alert(1)</script>
	- Server response: `<p>Results for <script>alert(1)</script></p>`
- eg. input 'test', and the error message says
	- `Task 'test' could not be added
	- So 'test' was not sanitised, page might be vulnerable to xss
- How to target victims with this?
	- Depends on which HTTP request being used to send input to server
	- Check through developer tools, Netowork (or burp)
	- GET requests - send parameter and data as part of URL, so to target user, can send them URL containing our payload

# DOM-based
- Happens entirely in the browser
- JavaScript used to change the page source through the Document Object Model (DOM)
	- DOM is the interface that JavaScript uses to read and modify what the browser displays
	- eg. HTML: `<p id="msg">Hello</p>`
		- JS: `document.getElementById("msg").textContent = "Hi Ethan";`
		- DOM object modified, browser re-renders that part of the page to show "Hi Ethan"
- eg. Add 'test', but
	- No HTTP request being made
	- Input parameter in the URL is using a hashtag for the item we added, so it is a client-side parameter completely processed by the browser
	- In page source, 'test' is nowhere to be found

## Source vs sink
- Source is the JS object that **takes in user input**
	- Any input parameter like URL parameter or input field
- Sink is the function that **writes user input** to a DOM Oject on the page
	- If Sink does not properly sanitize user input, would be vulnerable to XSS attack
	- eg. Some common JS functions to write to DOM objects
		- document.write(), DOM.innerHTML, DOM.outerHTML
		- DOM.innnerHTML may not allow the use of `<script>` tags, but still can bypass
			- `<img src="" onerror=alert(window.origin)>`

## Exploitation
- Similarly, the malicious URL is sent to the victim, then the Javascript is executed by the browser
	- eg. `http://94.237.123.185:46549/#task=%3Cimg%20src=%22%22%20onerror=alert(document.cookie)%3E`
	- We can see that the # means that it is a client side parameter