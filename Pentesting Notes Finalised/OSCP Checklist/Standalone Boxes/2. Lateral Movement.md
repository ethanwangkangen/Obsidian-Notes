# Linux - Moving to user account
- From inside web root,
	- `ls -al`
		- Check config files, `.git`, etc.
- `whoami`
- `hostname`
- `id`
- Check `~/.ssh/`
- Check `~/.bash_history`
- Check for running proceses
	- `ps aux | grep -i mysql`
	- `ps aux | grep -i apache
	- `ps aux | grep -i nginx
	- `ps aux | grep -i postgres
- Check for listening ports
	- `ss -tulpn`
- Note down all found usernames and passwords and spray everything
	- Including SSH!
	- Just because found a password for database doesnt mean there's something in the database. Maybe that's just the SSH password for user already


## Password Cracking and Hunting
### Cracking
- `hashid -j <hash>`
	- `-j` to also show the JtR (John the Ripper) format
	- `-m` for hashcat hash type
- `john --wordlist=<wordlist_file> <hash_file>

### Hunting
See more in [[6. Linux Attacking]]
- Everything is a file in Linux
	- Should go by categories
		- Config files, databases, notes, scripts, cronjobs, ssh keys
	- Searching for config files
		- `for l in $(echo ".conf .config .cnf");do echo -e "\nFile extension: " $l; find / -name *$l 2>/dev/null | grep -v "lib\|fonts\|share\|core" ;done`
	- Or search directly 
		- `for i in $(find / -name *.cnf 2>/dev/null | grep -v "doc\|lib");do echo -e "\nFile: " $i; grep "user\|password\|pass" $i 2>/dev/null | grep -v "\#";done`
			- For each file with file extension .cnf, search for 3 words: user, password, pass
	- Apply the same for other file extensions
		- `for l in $(echo ".sql .db .*db .db*");do echo -e "\nDB File extension: " $l; find / -name *$l 2>/dev/null | grep -v "doc\|lib\|headers\|share\|man";done`
	- Searching for notes
		-  `for l in $(echo ".sql .db .*db .db*");do echo -e "\nDB File extension: " $l; find / -name *$l 2>/dev/null | grep -v "doc\|lib\|headers\|share\|man";done
	- Searching for scripts
		- `for l in $(echo ".py .pyc .pl .go .jar .c .sh");do echo -e "\nFile extension: " $l; find / -name *$l 2>/dev/null | grep -v "doc\|lib\|headers\|share";done`
	- Cronjobs
		- `cat /etc/crontab`
	- History files
		- `cat .bash_history`
		- `.bashrc` and `.bash_profile` also can contain important information
	- Logs
		- Logs found in `/var/log/..
		- `for i in $(ls /var/log/* 2>/dev/null);do GREP=$(grep "accepted\|session opened\|session closed\|failure\|failed\|ssh\|password changed\|new user\|delete user\|sudo\|COMMAND\=\|logs" $i 2>/dev/null); if [[ $GREP ]];then echo -e "\n#### Log file: " $i; grep "accepted\|session opened\|session closed\|failure\|failed\|ssh\|password changed\|new user\|delete user\|sudo\|COMMAND\=\|logs" $i 2>/dev/null;fi;done`