
# HTTP
- text-based, request-response model.
- browser sends request to server, receives a response.

Example:
- visit a website, www.example.com
- browser resolves IP name via DNS.
- browser sends a HTTP request
```
GET /index.html HTTP/1.1
Host: example.com
```

- Server responds with
```
GET /index.html HTTP/1.1
Host: example.com
```


## HTTP Requests (Browser to server)

Get
```
GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html

```

Post
```
POST /login HTTP/1.1
Host: www.example.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 29

username=ethan&password=secret
```

Post with JSON
```
POST /api/users HTTP/1.1
Host: api.example.com
Content-Type: application/json
Content-Length: 52

{
  "username": "ethan",
  "email": "ethan@example.com"
}
```

Patch
```
PATCH /api/users/42 HTTP/1.1
Host: api.example.com
Content-Type: application/json
Content-Length: 35

{
  "email": "ethan@newdomain.com"
}
```

Delete
```
DELETE /api/users/42 HTTP/1.1
Host: api.example.com
Authorization: Bearer <token>
```


## HTTP Responses (Server to browser)

Basic Response
```
HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 137

<!DOCTYPE html>
<html>
  <head><title>Hello</title></head>
  <body><h1>Hello, Ethan!</h1></body>
</html>

```

JSON API response
```
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 62

{
  "id": 42,
  "username": "ethan",
  "email": "ethan@example.com"
}
```

500 Internal Server Error
```
HTTP/1.1 500 Internal Server Error
Content-Type: text/plain

Something went wrong on our end.
```

302 Redirect
```
HTTP/1.1 302 Found
Location: https://www.example.com/new-page
```

Response with file download
```
HTTP/1.1 200 OK
Content-Type: application/pdf
Content-Disposition: attachment; filename="report.pdf"
Content-Length: 123456

%PDF-1.4 ...
(binary file contents)
```


## HTTPS
- Secure version of HTTP
- Similar to HTTP, starts with DNS lookup and TCP Handshake.
- Then, TLS Handshake
	- 1. Client Hello (Client -> Server)
		- supported TLS versions
		- supported cipher suites (AES, ChaCha20..)
		- random number
		- supported extensions
	- 2. Server Hello (Server -> Client)
		- TLS version
		- Cipher suite
		- digital cert (tie domain name -> public key)
		- own random number
	- 3. Cert verification (Client)
		- Client checks that server cert valid, issued by trusted CA
		- domain name matches the one it requested
	- 4. Key exchange
		- Shared secret derived using 
			- RSA
			- Elliptic Curve Diffie-Hellman (ECDHE)
	- 5. Finished
		- Encrypted with new session key

Cipher suite includes 4 main components:
- Key exchange algo: ECDHE, RSA
- Authentication algo: RSA, ECDSA
- Encryption algo: AES-GCM, ChaCha20
- MAC/Integrity algo: SHA256, Poly 1305

